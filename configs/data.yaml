# Data configuration
data:
  # 数据路径
  raw_dir: "data/raw"
  processed_dir: "data/processed"
  
  # DataLoader 参数
  batch_size: 8              # 批次大小
  num_workers: 2             # DataLoader 工作进程数
  pin_memory: false          # 是否固定内存（GPU 训练时建议开启）

  # 序列配置
  window_size: 50            # 序列窗口长度
  stride: null               # 滑动窗口步长，null 表示等于 window_size（无重叠）

  # 数据集划分
  train_ratio: 0.9           # 训练集比例
  val_ratio: 0.1             # 验证集比例，不设置测试集

  # 加载模式
  streaming: false           # 是否使用流式加载模式（大数据集时启用）
  
  # 随机种子
  seed: 42

# Feature configuration
features:
  # 数值特征流 (Numerical Stream)
  # 用于捕获间隔时间、学习强度、历史耗时等连续信息
  numerical_features:
    - log_elapsed_seconds    # 距上次复习的秒数（log）
    - log_elapsed_days       # 距上次复习的天数（log）
    - log_time_spent_today   # 今日累计学习时间（log）
    - log_prev_review_duration # 上次复习耗时（log）
    - log_last_duration_on_card # 该卡片上次耗时（log）
    - card_index_today       # 今日该卡片的第几次复习
    - card_review_count      # 该卡片总复习次数

  # 类别特征流 (Categorical Stream)
  # 用于捕获离散状态信息
  categorical_features:
    - state                  # 卡片状态 (0=new, 1=learning, 2=review, 3=relearning)
    - prev_review_rating     # 上次复习评分 (0=无, 1-4=评分)
    - last_rating_on_card    # 该卡片上次评分 (0=无, 1-4=评分)

  # 类别特征词表大小
  categorical_vocab_sizes:
    state: 4                 # 4 种卡片状态
    prev_review_rating: 5    # 0 + 4 种评分
    last_rating_on_card: 5   # 0 + 4 种评分

  # 时间特征 (用于 Time2Vec 编码)
  time_feature: day_offset   # 相对时间偏移（天）

  # ID 特征 (用于构建 Attention Mask)
  card_id_feature: card_id   # 卡片 ID
  deck_id_feature: deck_id   # 卡组 ID

  # 目标特征
  ordinal_targets:           # 有序回归目标 (CORAL)
    - rating_gt1             # rating > 1
    - rating_gt2             # rating > 2
    - rating_gt3             # rating > 3
  duration_target: log_duration  # 耗时回归目标（log 变换）
